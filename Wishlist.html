<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Wishlist | Blackwear</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{margin:0;background:#0f0f0f;color:#fff}
header{
  background:#000;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #222;
}
header h2{color:#ff7f00;margin:0;font-size:20px}
header a{color:#ff7f00;text-decoration:none;font-size:14px}

.container{
  max-width:1100px;
  margin:auto;
  padding:16px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(170px,1fr));
  gap:14px;
}

.card{
  background:#141414;
  border:1px solid #1f1f1f;
  border-radius:16px;
  padding:10px;
  text-align:center;
}
.card img{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:12px;
}
.card h3{
  font-size:14px;
  margin:8px 0 4px;
}
.card p{
  color:#ff7f00;
  font-weight:bold;
  margin:0 0 8px;
}
.card button{
  width:100%;
  padding:8px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  margin-top:6px;
}
.view{background:#222;color:#fff}
.cart{background:#ff7f00;color:#000}
.remove{background:#000;color:#ff7f00;border:1px solid #333}

.empty{
  text-align:center;
  color:#777;
  margin-top:60px;
  font-size:14px;
}

footer{
  text-align:center;
  color:#666;
  font-size:13px;
  padding:20px;
}
</style>
</head>

<body>

<header>
  <h2>My Wishlist</h2>
  <a href="index.html">‚Üê Back</a>
</header>

<div class="container">
  <div id="wishlistGrid" class="grid"></div>
  <div id="emptyMsg" class="empty" style="display:none;">
    Your wishlist is empty ‚ù§Ô∏è
  </div>
</div>

<footer>¬© 2025 Blackwear</footer>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyBy0bIMp1ORV0UfLgKlxyr2V-I9mJjFb6o",
  authDomain: "blackwear-14a31.firebaseapp.com",
  projectId: "blackwear-14a31"
});

const db = firebase.firestore();
const auth = firebase.auth();

auth.onAuthStateChanged(user=>{
  if(!user){
    auth.signInAnonymously();
  }else{
    loadWishlist(user.uid);
  }
});

function loadWishlist(uid){
  const grid = document.getElementById("wishlistGrid");
  const empty = document.getElementById("emptyMsg");
  grid.innerHTML = "";

  db.collection("wishlist")
    .where("userId","==",uid)
    .get()
    .then(snap=>{
      if(snap.empty){
        empty.style.display="block";
        return;
      }
      empty.style.display="none";

      snap.forEach(doc=>{
        const p = doc.data();

        const card = document.createElement("div");
        card.className="card";
        card.innerHTML=`
          <img src="${p.image || ''}">
          <h3>${p.name || 'Product'}</h3>
          <p>‚Ç¶${Number(p.price||0).toLocaleString()}</p>
          <button class="view" onclick="viewProduct('${p.productId}')">View</button>
          <button class="cart" onclick="addToCart()">Add to Cart</button>
          <button class="remove" onclick="removeWish('${doc.id}')">Remove</button>
        `;
        grid.appendChild(card);
      });
    });
}

function viewProduct(id){
  window.location.href="product.html?id="+id;
}

function removeWish(id){
  if(!confirm("Remove from wishlist?")) return;
  db.collection("wishlist").doc(id).delete().then(()=>{
    location.reload();
  });
}

function addToCart(){
  alert("Added to cart üõí");
}
</script>

</body>
</html>
